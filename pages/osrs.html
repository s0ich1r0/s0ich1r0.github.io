
    <link rel="stylesheet" href="styles/osrs.css">
    <style>
        #last-updated { font-size: 0.85em; color: #999; }
    </style>
</head>
<body>
    <div class="container">
    <div id="spinner" class="loader-overlay">
            <div class="loader"></div>
    </div>
        <header>
                <div class="player-input">
                    <input id="player-name" type="text" value="Limpin Cider">
                    <button id="load-btn">Load Stats</button>
                </div>

                <div class="subtitle">
                    Total Level: <span id="total-level">1,362</span> •
                    Combat: <span id="combat-level">79</span>
                    <span id="last-updated"></span>
                </div>
        </header>

        <div class="content">

            <div class="stats-box">

                <div id="stats-spinner" class="loader-overlay">
                    <svg class="osrs-spinner" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="50" cy="50" r="35" fill="none" stroke="#8B4513" stroke-width="4" opacity="0.3"/>
                        <path d="M 50 15 A 35 35 0 0 1 85 50" fill="none" stroke="#FFD700" stroke-width="4" stroke-linecap="round">
                            <animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="1s" repeatCount="indefinite"/>
                        </path>
                        <circle cx="50" cy="50" r="25" fill="#2B1810" opacity="0.8"/>
                    </svg>
                </div>
                <div class="skill-grid">
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Attack.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Strength.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Defence.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Hitpoints.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Ranged.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Prayer.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Magic.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Cooking.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Woodcutting.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Fletching.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Fishing.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Firemaking.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Crafting.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Smithing.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Mining.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Herblore.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Agility.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Thieving.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Slayer.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Farming.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Runecraft.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Hunter.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Construction.png"><div class="level">-</div><div class="xp">-</div></div>
                    <div class="skill"><img src="https://oldschool.runescape.wiki/images/Sailing.png"><div class="level">-</div><div class="xp">-</div></div>
                </div>
            </div>

            <p style="text-align:center;">
                <a href="https://secure.runescape.com/m=hiscore_oldschool/hiscorepersonal?user1=Limpin+Cider" class="button" target="_blank">Official Hiscores</a>
            </p>
        </div>
        <p style="text-align:center;">
                <a href="https://osrs-webring-nav.s0ich1r0s4t0h.workers.dev/" class="button" target="_blank">OSRS Webring</a>
            </p>

                    <!-- OSRS Webring Navigation Widget -->
        <div style="text-align:center; margin:3vh 0;">
        <div style="background:url('https://oldschool.runescape.wiki/images/Button_brown_big.png?10a20') center center / 100% 100% no-repeat;
                    padding:2vh 4vw;
                    display:inline-block;">
            <div style="display:flex; justify-content:center; align-items:center; gap:4vw;">
            <a href="https://osrs-webring-nav.s0ich1r0s4t0h.workers.dev/s0ich1r0/previous?url=https://s0ich1r0.github.io/s0ich1r0s-sanctum/">
                <img src="https://oldschool.runescape.wiki/images/Left_arrow.png?6126b"
                    alt="Previous Site"
                    style="width:4vw; height:4vw; image-rendering:pixelated;">
            </a>
            <a href="https://osrs-webring-nav.s0ich1r0s4t0h.workers.dev/s0ich1r0/random?url=https://s0ich1r0.github.io/s0ich1r0s-sanctum/">
                <img src="https://oldschool.runescape.wiki/images/Teleport_to_House_icon_%28mobile%29.png?a9d3d"
                    alt="Random Site"
                    style="width:4vw; height:4vw; image-rendering:pixelated;">
            </a>
            <a href="https://osrs-webring-nav.s0ich1r0s4t0h.workers.dev/s0ich1r0/next?url=https://s0ich1r0.github.io/s0ich1r0s-sanctum/">
                <img src="https://oldschool.runescape.wiki/images/Right_arrow.png?e8a1f"
                    alt="Next Site"
                    style="width:4vw; height:4vw; image-rendering:pixelated;">
            </a>
            </div>
        </div>
        </div>

        <div class="photo-gallery">
            <div class="gallery-grid">
                <div class="gallery-item"><img src="pics/osrs.gif" alt="OSRS"></div>
                <div class="gallery-item"><img src="pics/Dance.gif" alt="Dance"></div>
            </div>
        </div>

        <p style="text-align:center; margin: 30px 0;">
            <a href="osrs-widget.html" class="button" target="_blank">
                Create Your Own Stats Widget
            </a>
        </p>

        <p style="text-align:center; margin: 30px 0;">
            Below is an Example of my OSRS Widget!
            Please use it if you play! No need to link

        <iframe src="Limpin_Cider_osrs_stats.html"
                width="500"
                height="300"
                frameborder="0"
                style="border: none; border-radius: 8px;">
        </iframe>

        <div class="music-player">
            <div class="music-title">♫ Sea Shanty II ♫</div>
            <audio controls autoplay loop>
                <source src="https://oldschool.runescape.wiki/images/Sea_Shanty_2.ogg" type="audio/ogg">
                Your browser does not support the audio element, matey.
            </audio>
        </div>

        <footer>
            Limpin Cider • 2007 Forever • Not affiliated with Jagex
        </footer>
    </div>




    <script>
        let PLAYER = "Limpin Cider";
        const UPDATE_INTERVAL = 60 * 60 * 1000;
        const skillIndices = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24];

        async function updateStats() {
            const spinner = document.getElementById("stats-spinner");
            spinner.style.display = "flex";

            try {
                const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent('https://secure.runescape.com/m=hiscore_oldschool/index_lite.json?player=' + encodeURIComponent(PLAYER))}`;
                const resp = await fetch(proxyUrl);
                if (!resp.ok) throw "Not on hiscores";

                const data = await resp.json();

                const overall = data.skills[0];
                document.getElementById("total-level").textContent = overall.level.toLocaleString();

                document.querySelectorAll(".skill").forEach((skillDiv, i) => {
                    const s = data.skills[skillIndices[i]];
                    skillDiv.querySelector(".level").textContent = s.level;
                    skillDiv.querySelector(".xp").textContent = Number(s.xp).toLocaleString();
                });

                const skills = data.skills;
                const atk = skills[1].level;
                const str = skills[3].level;
                const def = skills[2].level;
                const hp  = skills[3].level;
                const ranged = skills[4].level;
                const pray = skills[5].level;
                const magic = skills[6].level;

                const base = 0.25 * (def + hp + Math.floor(pray / 2));
                const meleeOff = 0.325 * (atk + str);
                const rangeOff = 0.4875 * ranged;
                const magicOff = 0.4875 * magic;
                const combatLevel = base + Math.max(meleeOff, rangeOff, magicOff) + 2;

                document.getElementById("combat-level").textContent = Math.floor(combatLevel);

                document.getElementById("last-updated").textContent =
                    ` • Updated ${new Date().toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'})}`;

            } catch (e) {
                console.error("Failed to load stats:", e);
                document.getElementById("last-updated").textContent = " • (offline)";
            } finally {
                spinner.style.display = "none";
            }
        }

        document.getElementById("load-btn").addEventListener("click", () => {
            const name = document.getElementById("player-name").value.trim();
            if (!name) return;
            PLAYER = name;
            document.querySelector(".button").href =
                "https://secure.runescape.com/m=hiscore_oldschool/hiscorepersonal?user1=" +
                encodeURIComponent(name);
            document.querySelector("footer").innerHTML =
                `${name} • 2007 Forever • Not affiliated with Jagex`;
            updateStats();
        });

        document.getElementById("player-name").addEventListener("keydown", (e) => {
            if (e.key === "Enter") document.getElementById("load-btn").click();
        });

        updateStats();
        setInterval(updateStats, UPDATE_INTERVAL);
    </script>



</body>
</html>
